#summary Milestones and tasks for the GLSL Back End.

= First Milestone =

Achieve the following functionality

  * 1.3 desktop shaders
  * the amount of 1.0 (ES) shader functionality that comes with that

But not yet able to do

  * Loops
  * Function calls
  * Structures
  * Vertex shaders
  * outputs other than {{{gl_FragColor}}}
  * matrices (uncommon in fragment shaders)
  * newer texturing; only original texturing is supported
  * GLSL2 defects/limitations, for the version we snapshot
  * arrays with variable indexes
  * arrays for things other than input interpolants and uniforms

== Things to do (who's currently working on it) in priority order ==

  * + Correct location of declarations for split control flow (JohnK)
  * + Have regression tests generating both Mesa IR and GLSL outputs (Michael)
  * + Finish generating Top IR texturing calls (Cody)
  * + Reconstruct texturing calls (Cody)
  * + Correct symbol names for external linkage (JohnK)
  * + Handle bool types in bottom (JohnK)
  * + Install an exception handling model so we can wrap failed runs and report the right error to the user. (Michael)
  * + Check all existing asserts and unsupported prints for correct usage in the exception model. (John)
  * - Ensuring all unsupported functionality has an exception raised
  * + Reduce output to just the shader (Michael)
  * - broader set of tests for what this checkpoint (John)
  * - Mixing scalars and vectors across operators
  * - Top IR constructors, for simple common cases
  * - Top IR L-value swizzling (Cody)
  * - Top IR arrays for uniforms and inputs (Cody)
  * - GLSL back end-support for extract/insert (John)
  * - Middle-end pass to coalesce multiple inserts into an L-value swizzle (Michael)
  * - Add !UnsupportedFunctionality to GLSL Visitor for all unsupported constructs
  * - GLSL back end support for arrays for uniforms and inputs
  * - Handle the (non-texturing) built-in functions (Cody)
  * - Run-time tests for what mode it's in; simple, obfuscating, or optimizing (Michael)
  * - Identify flow control we can't handle (Michael)
  * - Run-time #version control of features
  * - Add more LLVM optimizations
  * + Have a better switch than gla::!UseTgsiBackend for controlling what back end is used (Michael)
  * - handle built-in state: {{{gl_*}}} for uniforms, varyings, attributes

= Second Milestone =

  * Pretty much all normal shader stuff works for version 1.3.
  * All three modes work:  simplification, optimization, and obfuscation

== Things to do (who's currently working on it) not yet in priority order ==

  * - latest version of GLSL2
  * - original variable names
  * - original line numbers
  * - fix the linux/windows output differences in the test files
  * - 1.3 texturing
  * - Figure out how to keep matrices through the stack (JohnK)
  * - loop detection and support of normal/typical loops
  * - function calls
  * - vertex shaders
  * - {{{gl_FragDepth}}}, {{{gl_FragData}}}
  * - Fragment shader user-defined outputs
  * - matrices (uncommon in fragment shaders)
  * - support multiple compilations units for a single stage
  * - top IR driven tests

= Third Milestone =

  * Post 1.3.
  * Cross-stage interactions.
  * All non-goto flow control works.

== Things to do (who's currently working on it) not yet in priority order ==

  * - need a parser that can do glsl 3.x, possibly 4.x
  * - investigate cross-stage optimizations, obfuscations, simplifications